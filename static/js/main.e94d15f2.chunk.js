(this.webpackJsonpnpm=this.webpackJsonpnpm||[]).push([[0],[,,,,,,,,,,,,,function(o,e,n){},function(o,e,n){},function(o,e,n){},,function(o,e,n){},function(o,e,n){},function(o,e,n){},function(o,e,n){},function(o,e,n){},function(o,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),m=n(4),t=n.n(m),r=(n(13),n(14),n(15),n(0)),a=function(){return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("img",{src:"data:image/png;base64,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",className:"logo",alt:"logo"}),Object(r.jsx)("div",{className:"title",children:"Chess Studies"})]})},l=n(5),c=n(6),u=n(2),v=n(8),p=n(7),d=(n(17),n(18),function(o){return Object(r.jsx)("div",{className:"board-zone",children:Object(r.jsx)("div",{className:"board",children:o.game.data.map((function(e,n){return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("br",{className:n%o.game.nrSquaresPerside===0&&n>0?"cr":"hidden"}),Object(r.jsx)("div",{"data-pos":n,className:"square "+e.squareColor,dangerouslySetInnerHTML:{__html:o.game.figCodes[e.fig]?o.game.figCodes[e.fig]:"&nbsp;"}},n)]},n)}))})})}),g=(n(19),n(20),function(o){return console.log(o),Object(r.jsx)("div",{className:"game-turns",children:Object(r.jsx)("ol",{children:o.turnsList.map((function(e,n){return Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{onClick:o.movePGN,"data-turn":n+1,"data-side":"w",className:"turn-w ".concat(o.currentMove.number===n+1&&"w"===o.currentMove.side?"turn-current":""),children:e.w}),Object(r.jsx)("span",{onClick:o.movePGN,"data-turn":n+1,"data-side":"b",className:"turn-b ".concat(o.currentMove.number===n+1&&"b"===o.currentMove.side?"turn-current":""),children:e.b})]},n)}))})})}),f=(n(21),function(o){return Object(r.jsxs)("div",{className:"game-resume",children:[o.resume.Date," ",o.resume.White," vs ",o.resume.Black," ",o.resume.Result]})}),b=function(o){var e=o.game.status,n=o.game.pgnHistory;return e===o.statuses.off?Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:o.game.infosTitle}),Object(r.jsx)("textarea",{id:"game-input",className:"game-input",name:"pgn",defaultValue:n}),Object(r.jsx)("button",{onClick:o.savePGN,children:"Go"})]}):e===o.statuses.loaded?Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:o.game.infosTitle}),Object(r.jsx)("p",{className:"infosMessage",children:o.game.infosMessage})]}):e===o.statuses.ready?Object(r.jsxs)("div",{className:"turns-zone",children:[Object(r.jsx)(f,{resume:o.game.pgnResume}),Object(r.jsx)(g,{turnsList:o.game.pgnGame,currentMove:o.game.move,movePGN:o.movePGN})]}):Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:"404"}),Object(r.jsx)("p",{className:"infosMessage",children:"Sorry Buddy, I'm afraid we are lost !"})]})},h=function(o){return o!==o.toUpperCase()},w=function(o,e){for(var n=1;n<9;n++)if(n!==o.moveRow){var i={column:o.moveColumn,row:n};0!==o.comingFromRow&&i.row!==o.comingFromRow||""!==o.comingFromColumn&&i.column!==o.comingFromColumn||o.possiblePositions.push(i)}for(var s=0;s<8;s++)if(e[s]!==o.moveColumn){var m={column:e[s],row:o.moveRow};0!==o.comingFromRow&&m.row!==o.comingFromRow||""!==o.comingFromColumn&&m.column!==o.comingFromColumn||o.possiblePositions.push(m)}},j=function(o,e){"castle-king"===o.moveType?(o.possiblePositions.push({column:"e",row:"w"===o.moveSide?1:8}),o.additionalMove.possiblePositions.push({column:"h",row:"w"===o.moveSide?1:8}),o.moveType="move",o.additionalMove.moveType="move"):"castle-queen"===o.moveType?(o.possiblePositions.push({column:"e",row:"w"===o.moveSide?1:8}),o.additionalMove.possiblePositions.push({column:"a",row:"w"===o.moveSide?1:8}),o.moveType="move",o.additionalMove.moveType="move"):o.uniqueFigure=!0},R=function(o,e){if(4===o.moveRow&&"w"===o.moveSide&&"move"===o.moveType)o.possiblePositions.push({column:o.moveColumn,row:3}),o.possiblePositions.push({column:o.moveColumn,row:2});else if(5===o.moveRow&&"b"===o.moveSide&&"move"===o.moveType)o.possiblePositions.push({column:o.moveColumn,row:7}),o.possiblePositions.push({column:o.moveColumn,row:6});else if("move"===o.moveType)o.possiblePositions.push({column:o.moveColumn,row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1});else if("take"===o.moveType)if(""!==o.comingFromColumn)o.possiblePositions.push({column:o.comingFromColumn,row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1});else{var n=e.indexOf(o.moveColumn);0===n?o.possiblePositions.push({column:e[1],row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1}):7===n?o.possiblePositions.push({column:e[6],row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1}):(o.possiblePositions.push({column:e[n-1],row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1}),o.possiblePositions.push({column:e[n+1],row:"w"===o.moveSide?o.moveRow-1:o.moveRow+1}))}else o.isError=!0},P=function(o,e){for(var n=o.moveRow,i=e.indexOf(o.moveColumn)+1,s=i+1,m=n+1,t=0;t<9;t++){if(s<9&&m<9){var r={column:e[s-1],row:m};0!==o.comingFromRow&&r.row!==o.comingFromRow||""!==o.comingFromColumn&&r.column!==o.comingFromColumn||o.possiblePositions.push(r)}s++,m++}s=i-1,m=n+1;for(var a=0;a<9;a++){if(s>0&&m<9){var l={column:e[s-1],row:m};0!==o.comingFromRow&&l.row!==o.comingFromRow||""!==o.comingFromColumn&&l.column!==o.comingFromColumn||o.possiblePositions.push(l)}s--,m++}s=i+1,m=n-1;for(var c=0;c<9;c++){if(s<9&&m>0){var u={column:e[s-1],row:m};0!==o.comingFromRow&&u.row!==o.comingFromRow||""!==o.comingFromColumn&&u.column!==o.comingFromColumn||o.possiblePositions.push(u)}s++,m--}s=i-1,m=n-1;for(var v=8;v>0;v--){if(s>0&&s>0){var p={column:e[s-1],row:m};0!==o.comingFromRow&&p.row!==o.comingFromRow||""!==o.comingFromColumn&&p.column!==o.comingFromColumn||o.possiblePositions.push(p)}s--,m--}},y=function(o,e){var n=o.moveRow,i=e.indexOf(o.moveColumn)+1;if(n-2>0&&i-1>0){var s={column:e[i-1-1],row:n-2};0!==o.comingFromRow&&s.row!==o.comingFromRow||""!==o.comingFromColumn&&s.column!==o.comingFromColumn||o.possiblePositions.push(s)}if(n-2>0&&i+1<9){var m={column:e[i+1-1],row:n-2};0!==o.comingFromRow&&m.row!==o.comingFromRow||""!==o.comingFromColumn&&m.column!==o.comingFromColumn||o.possiblePositions.push(m)}if(n+2<9&&i-1>0){var t={column:e[i-1-1],row:n+2};0!==o.comingFromRow&&t.row!==o.comingFromRow||""!==o.comingFromColumn&&t.column!==o.comingFromColumn||o.possiblePositions.push(t)}if(n+2<9&&i+1<9){var r={column:e[i+1-1],row:n+2};0!==o.comingFromRow&&r.row!==o.comingFromRow||""!==o.comingFromColumn&&r.column!==o.comingFromColumn||o.possiblePositions.push(r)}if(n-1>0&&i-2>0){var a={column:e[i-2-1],row:n-1};0!==o.comingFromRow&&a.row!==o.comingFromRow||""!==o.comingFromColumn&&a.column!==o.comingFromColumn||o.possiblePositions.push(a)}if(n-1>0&&i+2<9){var l={column:e[i+2-1],row:n-1};0!==o.comingFromRow&&l.row!==o.comingFromRow||""!==o.comingFromColumn&&l.column!==o.comingFromColumn||o.possiblePositions.push(l)}if(n+1<9&&i-2>0){var c={column:e[i-2-1],row:n+1};0!==o.comingFromRow&&c.row!==o.comingFromRow||""!==o.comingFromColumn&&c.column!==o.comingFromColumn||o.possiblePositions.push(c)}if(n+1<9&&i+2<9){var u={column:e[i+2-1],row:n+1};0!==o.comingFromRow&&u.row!==o.comingFromRow||""!==o.comingFromColumn&&u.column!==o.comingFromColumn||o.possiblePositions.push(u)}},T=function(o){return 0===o.number?0:2*(o.number-1)+("w"===o.side?1:2)},G=function(o){Object(v.a)(n,o);var e=Object(p.a)(n);function n(){var o;return Object(l.a)(this,n),(o=e.call(this)).moveGameTo=function(e){var n=o.state.move,i=o.state.pgnGame,s=o.state.data,m=o.state.columns.slice(0),t=function(o,e,n,i){var s=T(n),m=T(e),t={moveSide:"",moveColumn:"",moveRow:0,movePieceType:null,moveType:null,isCheck:!1,isMat:!1,isError:!1,isDone:!0,possiblePositions:[],additionalMove:null,comingFromRow:0,comingFromColumn:"",uniqueFigure:!1,promoteTo:null,number:0};if(s>m){t.isDone=!1;var r={};(0===m?m=1:m+1)%2===1?(r.number=Math.trunc(m/2)+1,r.side="w"):(r.number=(m+1)/2,r.side="b");var a=o[r.number-1][r.side];if(t.moveSide=r.side,t.number=r.number,a=a.replace(/\?|!/,""),t.moveType="move",-1!==a.indexOf("x")&&(a=a.replace("x",""),t.moveType="take"),"+"===a.charAt(a.length-1)&&"+"===a.charAt(a.length-2)?(t.isMat=!0,a=a.substring(0,a.length-2)):"+"===a.charAt(a.length-1)&&(t.isCheck=!0,a=a.substring(0,a.length-1)),2===a.length)t.movePieceType="p",t.moveColumn=a.charAt(0),t.moveRow=parseInt(a.charAt(1)),isNaN(t.moveRow)&&(t.isError=!0);else if(3===a.length)"0-0"===a||"O-O"===a?(t.movePieceType="K",t.moveColumn="g",t.moveRow="w"===t.moveSide?1:8,t.moveType="castle-king",t.possiblePositions=[],t.additionalMove={moveSide:t.moveSide,moveColumn:"f",moveRow:t.moveRow,movePieceType:"R",moveType:t.moveType,isCheck:!1,isError:!1,possiblePositions:[]}):(h(a.charAt(0))?(t.movePieceType="p",t.comingFromColumn=a.charAt(0),t.moveColumn=a.charAt(1),t.moveRow=parseInt(a.charAt(2))):(t.movePieceType=a.charAt(0),t.moveColumn=a.charAt(1),t.moveRow=parseInt(a.charAt(2))),isNaN(t.moveRow)&&(t.isError=!0));else if(4===a.length)if("="===a.charAt(2))t.promoteTo=a.charAt(3),t.movePieceType="p",t.moveColumn=a.charAt(0),t.moveRow=parseInt(a.charAt(1));else{t.movePieceType=a.charAt(0);var l=a.charAt(1);isNaN(parseInt(l))?t.comingFromColumn=l:t.comingFromRow=parseInt(l),t.moveColumn=a.charAt(2),t.moveRow=parseInt(a.charAt(3)),isNaN(t.moveRow)&&(t.isError=!0)}else"0-0-0"===a||"O-O-O"===a?(t.movePieceType="K",t.moveColumn="c",t.moveRow="w"===t.moveSide?1:8,t.moveType="castle-queen",t.possiblePositions=[],t.additionalMove={moveSide:t.moveSide,moveColumn:"d",moveRow:t.moveRow,movePieceType:"R",moveType:t.moveType,isCheck:!1,isError:!1,possiblePositions:[]}):t.isError=!0;t.isError||(t.possiblePositions=[],"p"===t.movePieceType?R(t,i):"N"===t.movePieceType?y(t,i):"B"===t.movePieceType?P(t,i):"R"===t.movePieceType?w(t,i):"K"===t.movePieceType?j(t,i):"Q"===t.movePieceType&&(t.uniqueFigure=!0))}return t}(i,n,e,m);if(!t.isError&&!t.isDone){var r=!1;if(t.possiblePositions&&t.possiblePositions.length>0){for(var a=0;a<t.possiblePositions.length&&!r;a++)for(var l=0;l<s.length;l++)if(s[l].column===t.possiblePositions[a].column&&s[l].row===t.possiblePositions[a].row&&s[l].fig===t.movePieceType+t.moveSide.toUpperCase()){r=!0,s[l].fig=null;break}if(null!==t.additionalMove){for(var c=r,v=!1,p=0;p<s.length;p++)s[p].column===t.additionalMove.possiblePositions[0].column&&s[p].row===t.additionalMove.possiblePositions[0].row&&s[p].fig===t.additionalMove.movePieceType+t.additionalMove.moveSide.toUpperCase()&&(v=!0,s[p].fig=null);r=c&&v}}if(!0===t.uniqueFigure)for(var d=0;d<s.length;d++)if(s[d].fig===t.movePieceType+t.moveSide.toUpperCase()){r=!0,s[d].fig=null;break}if(r){for(var g=0;g<s.length;g++)if(s[g].column===t.moveColumn&&s[g].row===t.moveRow){if("take"===t.moveType){if(null===s[g].fig&&"p"===t.movePieceType){var f="w"===t.moveSide?8:-8;s[g+f].fig=null}s[g].fig=t.movePieceType+t.moveSide.toUpperCase()}else s[g].fig=t.promoteTo?t.promoteTo+t.moveSide.toUpperCase():t.movePieceType+t.moveSide.toUpperCase();break}if(null!=t.additionalMove)for(var b=0;b<s.length;b++)if(s[b].column===t.additionalMove.moveColumn&&s[b].row===t.additionalMove.moveRow){s[b].fig=t.additionalMove.movePieceType+t.additionalMove.moveSide.toUpperCase();break}o.setState((function(o,e){return{data:s,move:{number:t.number,side:t.moveSide}}}),(function(){var n=Object(u.a)(o);setTimeout((function(){n.moveGameTo(e)}),800)}))}}console.log(t)},o.cleanRawInfo=function(o){var e=o.replace(/\\|[|]|"/g,""),n=e.indexOf(" ");if(-1!==n){var i=e.substring(0,n-1),s=e.substring(n+1,e.length),m={};return m[i]=s,m}return null},o.movePGN=function(e){var n=function(o){var e=0,n="w",i=null;return o.hasAttribute("data-turn")&&o.hasAttribute("data-side")&&(e=parseInt(o.getAttribute("data-turn")),isNaN(e)&&(e=0),n=o.getAttribute("data-side")),e>0&&(i={number:e,side:n}),i}(e.currentTarget),i=T(n),s=o.state.move,m=T(s);if(i!==m)if(i>m)o.moveGameTo(n);else{var t=JSON.parse(o.state.initialData);o.setState((function(e,n){return{data:t,move:{number:0,side:"w"},status:o.gameStatus.ready}}),(function(){o.moveGameTo(n)}))}},o.savePGN=function(){var e=document.getElementById("game-input");if(null!=e){var n=e.value;""!==n&&(localStorage.setItem("pgnHistory",n),o.setState((function(e,n){return{status:o.gameStatus.loaded}}),(function(){o.setGameInfos();for(var e,i=[],s=1,m=/\n\n/.exec(n).index,t=n.substring(m,n.length).replace(/\r\n?|\n/g," ").trim(),r=n.substring(0,m).replace(/\r\n?|\n/g,",").trim().split(","),a=t.indexOf(s+"."),l=0;-1!==a&&-1!==l;){e=-1!==(l=t.indexOf(s+1+"."))?l:a+100;var c=t.substring(a,e).replace(s+".","").trim().split(" "),u={w:c[0]};2===c.length&&(u.b=c[1]),i.push(u),a=l,s++}var v={};r.forEach((function(o){var e=o.replace(/\\|\[|\]|"/g,""),n=e.indexOf(" ");if(-1!==n){var i=e.substring(0,n),s=e.substring(n+1,e.length);v[i]=s}})),o.setState((function(e,n){return{pgnResume:v,pgnGame:i,status:o.gameStatus.ready}}),(function(){o.setGameInfos()}))})))}},o.setGameInfos=function(){var e="";switch(o.state.status){case o.gameStatus.off:e={title:"Please enter a game in PGN format",message:""};break;case o.gameStatus.loaded:e={title:"Game loaded",message:"analysing game...(WIP)"};break;case o.gameStatus.inerror:e={title:"Error !",message:"the game can't be analysed..."};break;case o.gameStatus.ready:e={title:"Game ready",message:"Let's read it !"};break;default:e={title:"Error !",message:"the program is in error..."}}o.setState((function(o,n){return{infosTitle:e.title,infosMessage:e.message}}))},o.setNewGame=function(){var e="";null!==localStorage.getItem("pgnHistory")&&(e=localStorage.getItem("pgnHistory"));for(var n,i=[],s=[],m=o.state.blackColor,t=o.state.whiteColor,r=o.state.black,a=o.state.white,l=t,c=0,u=0,v=0,p=7;p>=0;p--){c=o.state.rows[p];for(var d=0;d<8;d++)u=o.state.columns[d],++v%8===1?n=l:l=n=l===m?t:m,i.push({row:c,column:u,squareColor:n,fig:null})}o.state.figures.forEach((function(e,n){s.push({row:o.state.rows[0],column:o.state.columns[n],fig:e+a}),s.push({row:o.state.rows[1],column:o.state.columns[n],fig:o.state.pawn+a}),s.push({row:o.state.rows[6],column:o.state.columns[n],fig:o.state.pawn+r}),s.push({row:o.state.rows[7],column:o.state.columns[n],fig:e+r})})),i.forEach((function(o){var e=s.filter((function(e){return e.row===o.row&&e.column===o.column}));1===e.length&&(o.fig=e[0].fig)})),o.setState((function(o,n){return{data:i,initialData:JSON.stringify(i),positions:s,move:{number:0,side:"w"},pgnHistory:e,gameIsReady:!0}}))},o.gameStatus={off:0,loaded:1,inerror:2,ready:3},o.state={initialData:null,gameIsReady:!1,status:o.gameStatus.off,infosTitle:"",infosMessage:"",msg:"White to play",data:[],pgnHistory:"",move:{number:0,side:"b"},pgnResume:[],pgnGame:[],positions:[],columns:"a,b,c,d,e,f,g,h".split(","),rows:[1,2,3,4,5,6,7,8],figures:"R,N,B,Q,K,B,N,R".split(","),pawn:"p",black:"B",white:"W",blackColor:"dark-square",whiteColor:"light-square",nrSquaresPerside:8,figCodes:{KB:"&#9818;",QB:"&#9819;",RB:"&#9820;",BB:"&#9821;",NB:"&#9822;",pB:"&#9823;",KW:"&#9812;",QW:"&#9813;",RW:"&#9814;",BW:"&#9815;",NW:"&#9816;",pW:"&#9817;"}},o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setNewGame()}},{key:"render",value:function(){return this.state.gameIsReady?Object(r.jsxs)("div",{className:"game",children:[Object(r.jsx)("div",{className:"game-board",children:Object(r.jsx)(d,{game:this.state},1)}),Object(r.jsx)("div",{className:"game-info",children:Object(r.jsx)(b,{game:this.state,movePGN:this.movePGN,savePGN:this.savePGN,statuses:this.gameStatus},1)})]}):Object(r.jsx)("div",{className:"game",children:Object(r.jsx)("h1",{children:" Loading "})})}}]),n}(s.a.Component);var N=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(a,{}),Object(r.jsx)(G,{})]})};t.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(N,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.e94d15f2.chunk.js.map