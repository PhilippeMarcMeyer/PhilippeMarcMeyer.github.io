(this.webpackJsonpnpm=this.webpackJsonpnpm||[]).push([[0],[,,,,,,,,,,,,,function(e,o,n){},function(e,o,n){},function(e,o,n){},,function(e,o,n){},function(e,o,n){},function(e,o,n){},function(e,o,n){},function(e,o,n){},function(e,o,n){},function(e,o,n){"use strict";n.r(o);var i=n(1),s=n.n(i),m=n(4),t=n.n(m),r=(n(13),n(14),n(15),n(0)),a=function(){return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("img",{src:"data:image/png;base64,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",className:"logo",alt:"logo"}),Object(r.jsx)("div",{className:"title",children:"Chess Studies"})]})},l=n(5),c=n(6),u=n(2),v=n(8),d=n(7),p=(n(17),n(18),function(e){return Object(r.jsx)("div",{className:"board-zone",children:Object(r.jsx)("div",{className:"board",children:e.game.data.map((function(o,n){return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)("div",{"data-pos":n,className:"square "+o.squareColor,dangerouslySetInnerHTML:{__html:e.game.figCodes[o.fig]?e.game.figCodes[o.fig]:"&nbsp;"}},n)},n)}))})})}),g=(n(19),n(20),function(e){return Object(r.jsx)("div",{className:"game-turns",children:Object(r.jsx)("ol",{children:e.turnsList.map((function(o,n){return Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{onClick:e.movePGN,"data-turn":n+1,"data-side":"w",className:"turn-w ".concat(e.currentMove.number===n+1&&"w"===e.currentMove.side?"turn-current":""),children:o.w}),Object(r.jsx)("span",{onClick:e.movePGN,"data-turn":n+1,"data-side":"b",className:"turn-b ".concat(e.currentMove.number===n+1&&"b"===e.currentMove.side?"turn-current":""),children:o.b})]},n)}))})})}),b=(n(21),function(e){return Object(r.jsxs)("div",{className:"game-resume",children:[e.resume.Date," ",e.resume.White," vs ",e.resume.Black," ",e.resume.Result]})}),f=(n(22),function(e){return Object(r.jsxs)("div",{className:"moves-board",children:[Object(r.jsx)("span",{"data-move":"first",onClick:e.movePGN,children:"\u23ee"}),Object(r.jsx)("span",{"data-move":"prev",onClick:e.movePGN,children:"\u23f4"}),Object(r.jsx)("span",{"data-move":"pause",className:"hidden",onClick:e.movePGN,children:"\u23f8"}),Object(r.jsx)("span",{"data-move":"next",onClick:e.movePGN,children:"\u23f5"}),Object(r.jsx)("span",{"data-move":"last",onClick:e.movePGN,children:"\u23ed"})]})}),h=function(e){var o=e.game.status,n=e.game.pgnHistory;return o===e.statuses.off?Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:e.game.infosTitle}),Object(r.jsx)("textarea",{id:"game-input",className:"game-input",name:"pgn",defaultValue:n}),Object(r.jsx)("button",{onClick:e.savePGN,children:"Go"})]}):o===e.statuses.loaded?Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:e.game.infosTitle}),Object(r.jsx)("p",{className:"infosMessage",children:e.game.infosMessage})]}):o===e.statuses.ready?Object(r.jsxs)("div",{className:"turns-zone",children:[Object(r.jsx)(b,{resume:e.game.pgnResume}),Object(r.jsx)(g,{turnsList:e.game.pgnGame,currentMove:e.game.move,movePGN:e.movePGN}),Object(r.jsx)(f,{movePGN:e.movePGN})]}):Object(r.jsxs)("div",{className:"info-zone",children:[Object(r.jsx)("h3",{className:"board-title",children:"404"}),Object(r.jsx)("p",{className:"infosMessage",children:"Sorry Buddy, I'm afraid we are lost !"})]})},w=function(e){return e!==e.toUpperCase()},j=function(e,o){for(var n=1;n<9;n++)if(n!==e.moveRow){var i={column:e.moveColumn,row:n};0!==e.comingFromRow&&i.row!==e.comingFromRow||""!==e.comingFromColumn&&i.column!==e.comingFromColumn||e.possiblePositions.push(i)}for(var s=0;s<8;s++)if(o[s]!==e.moveColumn){var m={column:o[s],row:e.moveRow};0!==e.comingFromRow&&m.row!==e.comingFromRow||""!==e.comingFromColumn&&m.column!==e.comingFromColumn||e.possiblePositions.push(m)}},R=function(e,o){"castle-king"===e.moveType?(e.possiblePositions.push({column:"e",row:"w"===e.moveSide?1:8}),e.additionalMove.possiblePositions.push({column:"h",row:"w"===e.moveSide?1:8}),e.moveType="move",e.additionalMove.moveType="move"):"castle-queen"===e.moveType?(e.possiblePositions.push({column:"e",row:"w"===e.moveSide?1:8}),e.additionalMove.possiblePositions.push({column:"a",row:"w"===e.moveSide?1:8}),e.moveType="move",e.additionalMove.moveType="move"):e.uniqueFigure=!0},P=function(e,o){if(4===e.moveRow&&"w"===e.moveSide&&"move"===e.moveType)e.possiblePositions.push({column:e.moveColumn,row:3}),e.possiblePositions.push({column:e.moveColumn,row:2});else if(5===e.moveRow&&"b"===e.moveSide&&"move"===e.moveType)e.possiblePositions.push({column:e.moveColumn,row:7}),e.possiblePositions.push({column:e.moveColumn,row:6});else if("move"===e.moveType)e.possiblePositions.push({column:e.moveColumn,row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1});else if("take"===e.moveType)if(""!==e.comingFromColumn)e.possiblePositions.push({column:e.comingFromColumn,row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1});else{var n=o.indexOf(e.moveColumn);0===n?e.possiblePositions.push({column:o[1],row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1}):7===n?e.possiblePositions.push({column:o[6],row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1}):(e.possiblePositions.push({column:o[n-1],row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1}),e.possiblePositions.push({column:o[n+1],row:"w"===e.moveSide?e.moveRow-1:e.moveRow+1}))}else e.isError=!0},G=function(e,o){for(var n=e.moveRow,i=o.indexOf(e.moveColumn)+1,s=i+1,m=n+1,t=0;t<9;t++){if(s<9&&m<9){var r={column:o[s-1],row:m};0!==e.comingFromRow&&r.row!==e.comingFromRow||""!==e.comingFromColumn&&r.column!==e.comingFromColumn||e.possiblePositions.push(r)}s++,m++}s=i-1,m=n+1;for(var a=0;a<9;a++){if(s>0&&m<9){var l={column:o[s-1],row:m};0!==e.comingFromRow&&l.row!==e.comingFromRow||""!==e.comingFromColumn&&l.column!==e.comingFromColumn||e.possiblePositions.push(l)}s--,m++}s=i+1,m=n-1;for(var c=0;c<9;c++){if(s<9&&m>0){var u={column:o[s-1],row:m};0!==e.comingFromRow&&u.row!==e.comingFromRow||""!==e.comingFromColumn&&u.column!==e.comingFromColumn||e.possiblePositions.push(u)}s++,m--}s=i-1,m=n-1;for(var v=8;v>0;v--){if(s>0&&s>0){var d={column:o[s-1],row:m};0!==e.comingFromRow&&d.row!==e.comingFromRow||""!==e.comingFromColumn&&d.column!==e.comingFromColumn||e.possiblePositions.push(d)}s--,m--}},N=function(e,o){var n=e.moveRow,i=o.indexOf(e.moveColumn)+1;if(n-2>0&&i-1>0){var s={column:o[i-1-1],row:n-2};0!==e.comingFromRow&&s.row!==e.comingFromRow||""!==e.comingFromColumn&&s.column!==e.comingFromColumn||e.possiblePositions.push(s)}if(n-2>0&&i+1<9){var m={column:o[i+1-1],row:n-2};0!==e.comingFromRow&&m.row!==e.comingFromRow||""!==e.comingFromColumn&&m.column!==e.comingFromColumn||e.possiblePositions.push(m)}if(n+2<9&&i-1>0){var t={column:o[i-1-1],row:n+2};0!==e.comingFromRow&&t.row!==e.comingFromRow||""!==e.comingFromColumn&&t.column!==e.comingFromColumn||e.possiblePositions.push(t)}if(n+2<9&&i+1<9){var r={column:o[i+1-1],row:n+2};0!==e.comingFromRow&&r.row!==e.comingFromRow||""!==e.comingFromColumn&&r.column!==e.comingFromColumn||e.possiblePositions.push(r)}if(n-1>0&&i-2>0){var a={column:o[i-2-1],row:n-1};0!==e.comingFromRow&&a.row!==e.comingFromRow||""!==e.comingFromColumn&&a.column!==e.comingFromColumn||e.possiblePositions.push(a)}if(n-1>0&&i+2<9){var l={column:o[i+2-1],row:n-1};0!==e.comingFromRow&&l.row!==e.comingFromRow||""!==e.comingFromColumn&&l.column!==e.comingFromColumn||e.possiblePositions.push(l)}if(n+1<9&&i-2>0){var c={column:o[i-2-1],row:n+1};0!==e.comingFromRow&&c.row!==e.comingFromRow||""!==e.comingFromColumn&&c.column!==e.comingFromColumn||e.possiblePositions.push(c)}if(n+1<9&&i+2<9){var u={column:o[i+2-1],row:n+1};0!==e.comingFromRow&&u.row!==e.comingFromRow||""!==e.comingFromColumn&&u.column!==e.comingFromColumn||e.possiblePositions.push(u)}},y=function(e){return 0===e.number?0:2*(e.number-1)+("w"===e.side?1:2)},T=function(e){Object(v.a)(n,e);var o=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=o.call(this)).moveGameTo=function(o){var n=10;"pace"in o&&("quick"===o.pace?n=1:"stop"===o.pace&&e.setState((function(e,o){return{readerStop:!0}})));var i=e.state.move,s=e.state.pgnGame,m=e.state.data,t=e.state.columns.slice(0),r=function(e,o,n,i){var s=y(n),m=y(o),t={moveSide:"",moveColumn:"",moveRow:0,movePieceType:null,moveType:null,isCheck:!1,isMat:!1,isError:!1,isDone:!0,possiblePositions:[],additionalMove:null,comingFromRow:0,comingFromColumn:"",uniqueFigure:!1,promoteTo:null,number:0};if(s>m){t.isDone=!1;var r={};(0===m?m=1:m+1)%2===1?(r.number=Math.trunc(m/2)+1,r.side="w"):(r.number=(m+1)/2,r.side="b");var a=e[r.number-1][r.side];if(t.moveSide=r.side,t.number=r.number,a=a.replace(/\?|!/,""),t.moveType="move",-1!==a.indexOf("x")&&(a=a.replace("x",""),t.moveType="take"),"+"===a.charAt(a.length-1)&&"+"===a.charAt(a.length-2)?(t.isMat=!0,a=a.substring(0,a.length-2)):"+"===a.charAt(a.length-1)&&(t.isCheck=!0,a=a.substring(0,a.length-1)),2===a.length)t.movePieceType="p",t.moveColumn=a.charAt(0),t.moveRow=parseInt(a.charAt(1)),isNaN(t.moveRow)&&(t.isError=!0);else if(3===a.length)"0-0"===a||"O-O"===a?(t.movePieceType="K",t.moveColumn="g",t.moveRow="w"===t.moveSide?1:8,t.moveType="castle-king",t.possiblePositions=[],t.additionalMove={moveSide:t.moveSide,moveColumn:"f",moveRow:t.moveRow,movePieceType:"R",moveType:t.moveType,isCheck:!1,isError:!1,possiblePositions:[]}):(w(a.charAt(0))?(t.movePieceType="p",t.comingFromColumn=a.charAt(0),t.moveColumn=a.charAt(1),t.moveRow=parseInt(a.charAt(2))):(t.movePieceType=a.charAt(0),t.moveColumn=a.charAt(1),t.moveRow=parseInt(a.charAt(2))),isNaN(t.moveRow)&&(t.isError=!0));else if(4===a.length)if("="===a.charAt(2))t.promoteTo=a.charAt(3),t.movePieceType="p",t.moveColumn=a.charAt(0),t.moveRow=parseInt(a.charAt(1));else{t.movePieceType=a.charAt(0);var l=a.charAt(1);isNaN(parseInt(l))?t.comingFromColumn=l:t.comingFromRow=parseInt(l),t.moveColumn=a.charAt(2),t.moveRow=parseInt(a.charAt(3)),isNaN(t.moveRow)&&(t.isError=!0)}else"0-0-0"===a||"O-O-O"===a?(t.movePieceType="K",t.moveColumn="c",t.moveRow="w"===t.moveSide?1:8,t.moveType="castle-queen",t.possiblePositions=[],t.additionalMove={moveSide:t.moveSide,moveColumn:"d",moveRow:t.moveRow,movePieceType:"R",moveType:t.moveType,isCheck:!1,isError:!1,possiblePositions:[]}):t.isError=!0;t.isError||(t.possiblePositions=[],"p"===t.movePieceType?P(t,i):"N"===t.movePieceType?N(t,i):"B"===t.movePieceType?G(t,i):"R"===t.movePieceType?j(t,i):"K"===t.movePieceType?R(t,i):"Q"===t.movePieceType&&(t.uniqueFigure=!0))}return t}(s,i,o,t);if(!r.isError&&!r.isDone){var a=!1;if(r.possiblePositions&&r.possiblePositions.length>0){for(var l=0;l<r.possiblePositions.length&&!a;l++)for(var c=0;c<m.length;c++)if(m[c].column===r.possiblePositions[l].column&&m[c].row===r.possiblePositions[l].row&&m[c].fig===r.movePieceType+r.moveSide.toUpperCase()){a=!0,m[c].fig=null;break}if(null!==r.additionalMove){for(var v=a,d=!1,p=0;p<m.length;p++)m[p].column===r.additionalMove.possiblePositions[0].column&&m[p].row===r.additionalMove.possiblePositions[0].row&&m[p].fig===r.additionalMove.movePieceType+r.additionalMove.moveSide.toUpperCase()&&(d=!0,m[p].fig=null);a=v&&d}}if(!0===r.uniqueFigure)for(var g=0;g<m.length;g++)if(m[g].fig===r.movePieceType+r.moveSide.toUpperCase()){a=!0,m[g].fig=null;break}if(a){for(var b=0;b<m.length;b++)if(m[b].column===r.moveColumn&&m[b].row===r.moveRow){if("take"===r.moveType){if(null===m[b].fig&&"p"===r.movePieceType){var f="w"===r.moveSide?8:-8;m[b+f].fig=null}m[b].fig=r.movePieceType+r.moveSide.toUpperCase()}else m[b].fig=r.promoteTo?r.promoteTo+r.moveSide.toUpperCase():r.movePieceType+r.moveSide.toUpperCase();break}if(null!=r.additionalMove)for(var h=0;h<m.length;h++)if(m[h].column===r.additionalMove.moveColumn&&m[h].row===r.additionalMove.moveRow){m[h].fig=r.additionalMove.movePieceType+r.additionalMove.moveSide.toUpperCase();break}var T=!e.state.readerStop;e.setState((function(e,o){return{data:m,move:{number:r.number,side:r.moveSide}}}),(function(){var i=Object(u.a)(e);T&&setTimeout((function(){i.moveGameTo(o)}),n)}))}}console.log(r)},e.cleanRawInfo=function(e){var o=e.replace(/\\|[|]|"/g,""),n=o.indexOf(" ");if(-1!==n){var i=o.substring(0,n-1),s=o.substring(n+1,o.length),m={};return m[i]=s,m}return null},e.movePGN=function(o){var n=o.currentTarget.dataset,i=e.state.move,s=y(i),m=function(e,o,n){var i=0,s="w",m=null,t=n[n.length-1];if("move"in e){var r=e.move;"first"===r?m={number:0,side:"w"}:"last"===r?(m="b"in t?{number:n.length,side:"b"}:{number:n.length,side:"w"}).pace="quick":"pause"===r?(m=o).pace="stop":"prev"===r?((m="b"===o.side?{number:o.number,side:"w"}:{number:o.number-1,side:"b"}).number<1&&(m={number:1,side:"w"}),m.pace="quick"):"next"===r&&(m=o.number===n.length?"b"===o.side?o:"b"in t?{number:n.length,side:"b"}:o:"b"===o.side?{number:o.number+1,side:"w"}:{number:o.number,side:"b"}).number<1&&(m={number:1,side:"w"})}else"turn"in e&&"side"in e&&(i=parseInt(e.turn),isNaN(i)&&(i=0),s=e.side);return i>0&&(m={number:i,side:s}),m}(n,i,e.state.pgnGame),t=y(m);if(t!==s)if(t>s)e.moveGameTo(m);else{var r=JSON.parse(e.state.initialData);e.setState((function(o,n){return{data:r,move:{number:0,side:"w"},status:e.gameStatus.ready}}),(function(){e.moveGameTo(m)}))}},e.savePGN=function(){var o=document.getElementById("game-input");if(null!=o){var n=o.value;""!==n&&(localStorage.setItem("pgnHistory",n),e.setState((function(o,n){return{status:e.gameStatus.loaded}}),(function(){e.setGameInfos();for(var o,i=[],s=1,m=/\n\n/.exec(n).index,t=n.substring(m,n.length).replace(/\r\n?|\n/g," ").trim(),r=n.substring(0,m).replace(/\r\n?|\n/g,",").trim().split(","),a=t.indexOf(s+"."),l=0;-1!==a&&-1!==l;){o=-1!==(l=t.indexOf(s+1+"."))?l:a+100;var c=t.substring(a,o).replace(s+".","").trim().split(" "),u={w:c[0]};2===c.length&&(u.b=c[1]),i.push(u),a=l,s++}var v={};r.forEach((function(e){var o=e.replace(/\\|\[|\]|"/g,""),n=o.indexOf(" ");if(-1!==n){var i=o.substring(0,n),s=o.substring(n+1,o.length);v[i]=s}})),e.setState((function(o,n){return{pgnResume:v,pgnGame:i,status:e.gameStatus.ready}}),(function(){e.setGameInfos()}))})))}},e.setGameInfos=function(){var o="";switch(e.state.status){case e.gameStatus.off:o={title:"Please enter a game in PGN format",message:""};break;case e.gameStatus.loaded:o={title:"Game loaded",message:"analysing game...(WIP)"};break;case e.gameStatus.inerror:o={title:"Error !",message:"the game can't be analysed..."};break;case e.gameStatus.ready:o={title:"Game ready",message:"Let's read it !"};break;default:o={title:"Error !",message:"the program is in error..."}}e.setState((function(e,n){return{infosTitle:o.title,infosMessage:o.message}}))},e.setNewGame=function(){var o="";null!==localStorage.getItem("pgnHistory")&&(o=localStorage.getItem("pgnHistory"));for(var n,i=[],s=[],m=e.state.blackColor,t=e.state.whiteColor,r=e.state.black,a=e.state.white,l=t,c=0,u=0,v=0,d=7;d>=0;d--){c=e.state.rows[d];for(var p=0;p<8;p++)u=e.state.columns[p],++v%8===1?n=l:l=n=l===m?t:m,i.push({row:c,column:u,squareColor:n,fig:null})}e.state.figures.forEach((function(o,n){s.push({row:e.state.rows[0],column:e.state.columns[n],fig:o+a}),s.push({row:e.state.rows[1],column:e.state.columns[n],fig:e.state.pawn+a}),s.push({row:e.state.rows[6],column:e.state.columns[n],fig:e.state.pawn+r}),s.push({row:e.state.rows[7],column:e.state.columns[n],fig:o+r})})),i.forEach((function(e){var o=s.filter((function(o){return o.row===e.row&&o.column===e.column}));1===o.length&&(e.fig=o[0].fig)})),e.setState((function(e,n){return{data:i,initialData:JSON.stringify(i),positions:s,move:{number:0,side:"w"},pgnHistory:o,gameIsReady:!0}}))},e.gameStatus={off:0,loaded:1,inerror:2,ready:3},e.state={readerStop:!1,initialData:null,gameIsReady:!1,status:e.gameStatus.off,infosTitle:"",infosMessage:"",msg:"White to play",data:[],pgnHistory:"",move:{number:0,side:"b"},pgnResume:[],pgnGame:[],positions:[],columns:"a,b,c,d,e,f,g,h".split(","),rows:[1,2,3,4,5,6,7,8],figures:"R,N,B,Q,K,B,N,R".split(","),pawn:"p",black:"B",white:"W",blackColor:"dark-square",whiteColor:"light-square",nrSquaresPerside:8,figCodes:{KB:"&#9818;",QB:"&#9819;",RB:"&#9820;",BB:"&#9821;",NB:"&#9822;",pB:"&#9823;",KW:"&#9812;",QW:"&#9813;",RW:"&#9814;",BW:"&#9815;",NW:"&#9816;",pW:"&#9817;"}},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setNewGame()}},{key:"render",value:function(){return this.state.gameIsReady?Object(r.jsxs)("div",{className:"game",children:[Object(r.jsx)("div",{className:"game-board",children:Object(r.jsx)(p,{game:this.state},1)}),Object(r.jsx)("div",{className:"game-info",children:Object(r.jsx)(h,{game:this.state,moveFromCommand:this.moveFromCommand,movePGN:this.movePGN,savePGN:this.savePGN,statuses:this.gameStatus},1)})]}):Object(r.jsx)("div",{className:"game",children:Object(r.jsx)("h1",{children:" Loading "})})}}]),n}(s.a.Component);var C=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(a,{}),Object(r.jsx)(T,{})]})};t.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.5762e1ae.chunk.js.map