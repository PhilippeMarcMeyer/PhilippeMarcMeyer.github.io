{"version":3,"sources":["components/header/header.component.jsx","assets/logo.png","components/board/board.component.jsx","components/turns/turns.component.jsx","components/resume/resume.component.jsx","components/movesCommands/movesCommands.component.jsx","assets/first.gif","assets/prev.gif","assets/next.gif","assets/last.gif","components/info/info.component.jsx","utils.js","movesLogic.js","components/game/game.component.jsx","fen.js","App.js","index.js"],"names":["Header","className","src","alt","Board","props","game","data","map","x","i","Fragment","squareColor","dangerouslySetInnerHTML","__html","figCodes","fig","Turns","turnsList","turn","index","onClick","movePGN","currentMove","number","side","w","b","Resume","resume","Date","White","Black","Result","MovesCommands","Info","status","pgn","pgnHistory","statuses","off","infosTitle","id","name","defaultValue","savePGN","loaded","infosMessage","ready","pgnResume","pgnGame","move","charIsLowercase","c","toUpperCase","setRookPossiblePreviousPositions","nextMoveData","columnsOrdered","r","moveRow","possibleMove","moveColumn","comingFromRow","row","comingFromColumn","column","possiblePositions","push","setKingPossiblePreviousPositions","moveType","moveSide","additionalMove","uniqueFigure","setPawnPossiblePreviousPositions","posMoveColumn","indexOf","isError","setBishopPossiblePreviousPositions","rowPos","colPos","setKnightPossiblePreviousPositions","getMoveOffset","Game","moveGameTo","askedMove","timing","pace","setState","prevState","prevProps","state","gamePgn","gamePositions","columns","slice","askedMoveOffset","currentMoveOffset","movePieceType","isCheck","isMat","isDone","promoteTo","nextMovePosition","Math","trunc","nextMove","replace","charAt","length","substring","parseInt","isNaN","comingFrom","getNextMove","hasMoved","j","hasMovedKing","hasMovedRook","delta","doContinue","readerStop","fenGame","filter","fen","separator","nullCounter","currentFigure","forEach","col","toLowerCase","console","log","boardToFen","that","setTimeout","cleanRawInfo","raw","clean","pos","key","value","result","e","elem","currentTarget","dataset","movesList","lastMove","instruction","getAskedMove","fenMove","reinitData","JSON","parse","initialData","board","colDatas","split","cursorPos","colData","colDataLen","char","intTry","d","fenToBoard","gameStatus","textArea","document","getElementById","localStorage","setItem","setGameInfos","end","turns","limitBetweenGameParts","exec","trim","infos","turnPrevPosition","turnNextPosition","moves","turnInfo","infosClean","inerror","title","message","setNewGame","getItem","currentColor","positions","blackColor","whiteColor","black","white","previousColor","rows","figures","pawn","sqr","check","stringify","this","gameIsReady","moveFromCommand","React","Component","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2a326e6d.chunk.js","sourcesContent":["import React from 'react';\r\nimport './header.styles.css';\r\nimport logo from '../../assets/logo.png';\r\n\r\nconst Header = () => (\r\n  <div className=\"header\">\r\n    <img src={logo} className=\"logo\" alt=\"logo\" />\r\n    <div className=\"title\">\r\n      Chess Studies\r\n    </div>\r\n  </div>\r\n)\r\nexport default Header;","export default \"data:image/png;base64,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\"","import React from 'react';\r\nimport './board.styles.css';\r\n\r\nconst Board = (props) => {\r\n  return(\r\n  <div className='board-zone'>\r\n   <div className='board'>\r\n   {\r\n    props.game.data\r\n      .map((x,i) => (\r\n        <React.Fragment key={i}>\r\n        <div key={i} data-pos={i} className={ 'square '+x.squareColor} dangerouslySetInnerHTML={{__html: props.game.figCodes[x.fig] ?props.game.figCodes[x.fig]:'&nbsp;' }} />\r\n        </React.Fragment>\r\n      ))\r\n    }\r\n   </div>\r\n   </div>\r\n  )\r\n   }\r\n  export default Board;\r\n\r\n","import React from 'react';\r\nimport './turns.styles.css';\r\nconst Turns = (props) => {\r\n    return (\r\n        <div className=\"game-turns\">\r\n            <ol>\r\n                {\r\n                    props.turnsList.map((turn, index) =>\r\n                    <li key={index}>\r\n                    <span onClick={props.movePGN} data-turn={index + 1} data-side=\"w\"\r\n                        className={`turn-w ${props.currentMove.number === index + 1 && props.currentMove.side === 'w' ? \"turn-current\" : \"\"}`}>\r\n                        {turn.w}\r\n                    </span>\r\n                    <span onClick={props.movePGN} data-turn={index + 1} data-side=\"b\"\r\n                        className={`turn-b ${props.currentMove.number === index + 1 && props.currentMove.side === 'b' ? \"turn-current\" : \"\"}`}>\r\n                        {turn.b}\r\n                    </span>\r\n                </li>\r\n                    )\r\n                }\r\n            </ol>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Turns;","import React from 'react';\r\nimport './resume.styles.css';\r\n\r\nconst Resume = (props) => {\r\n    return(\r\n        <div className=\"game-resume\">\r\n            {props.resume.Date} {props.resume.White} vs {props.resume.Black} {props.resume.Result}          \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Resume;","import React from 'react';\r\nimport './movesCommands.styles.css';\r\nimport prev from '../../assets/prev.gif';\r\nimport next from '../../assets/next.gif';\r\nimport first from '../../assets/first.gif';\r\nimport last from '../../assets/last.gif';\r\nconst MovesCommands = (props) => {\r\n    return (\r\n        <div className=\"moves-board\">\r\n            <span data-move=\"first\" onClick={props.movePGN} ><img src={first} className=\"command-img\" alt=\"first\" /></span>           \r\n            <span data-move=\"prev\" onClick={props.movePGN} ><img src={prev} className=\"command-img\" alt=\"prev\" /></span>\r\n            <span data-move=\"pause\" className=\"hidden\" onClick={props.movePGN} >&#9208;</span>\r\n            <span data-move=\"next\" onClick={props.movePGN} ><img src={next} className=\"command-img\" alt=\"next\" /></span>\r\n            <span data-move=\"last\" onClick={props.movePGN} ><img src={last} className=\"command-img\" alt=\"last\" /></span>\r\n        </div>\r\n    )\r\n}\r\nexport default MovesCommands;","export default \"data:image/gif;base64,R0lGODlhMQAnAMwAAAAAALKAP3+vxWaaxZnFxQAAPwAAZsW2kr+mecW8n18rAGw7E0YTAIxULDM1M5KTkplkLF8rP39CE2aarMW2pZnFv6W2xXKdxb+mpbKKWYxUU0YTZr+vn2w7ZsXFxQAAACH5BAEAAB4ALAAAAAAxACcAAAX/oCeOZGmeaKqubOu+cCzPdG1njnO1mEvBAQBgwEJsCKxDRPAKDlcIhgGpOigKTJeTmIoCplUFANsUck/eL/VkFZK1ZlRajWq7s60tmiEUgk12d2VPJXN+ayOBgnCEI4aHJYqLeXGOfH19fyKSkyx6Io+Za5ydK5+hoptimJhvlE+oqaR9rp5msaKztHi2ABMSrMFfFRDCrLWmZgkLxqkNzaUqesvQf8/NyNKV1Maa18LZKZ8e3MGaHt/HvMmN5MzmiOjg69rt7vAm6dHilSTlkPnUDTrj7x3AgLsGoih3rsS3cCjGmeDW0OG+iP1OUKtoEeIJiRoXcHTo0QRIjR3iF6HQQC8FhwcPLNiYSbOmzZs4c+rcGSMEADs=\"","export default \"data:image/gif;base64,R0lGODlhIAAnALsAAAAAAH+vxQAAP7mXZqyDTCwAABkAAIavxYyvxbmXf6yDbBkAPywAP8XFxQAAAAAAACH5BAEAAA0ALAAAAAAgACcAAARzsMlJq7046827/2AoZsoxasQSnBhhCCtbuQAsU3Qd37l+Nz2fLCg8EYuiIxKkXHqaTg40ijIArtgsNTMoaL+2UPebDYu95O1mTDaL2Fr3G13eneBX+Qiv39P7fnl2N2OAdwWGdwyDPw0JCI2RkpOUlZYWEQA7\"","export default \"data:image/gif;base64,R0lGODlhJQAnALsAAAAAAMWvfz8AAGaXuUaArAAALAAAE3+XuT8AE8WvjGaArD8ALMWvhsXFxQAAAAAAACH5BAEAAA0ALAAAAAAlACcAAAR2sMlJq7046827/2AojhijkF+AEGgXCAbbai8Qz1lty3il7z2fAEAEBiU/4u2YVPJwTWcwKoUOi1hji1pcorjdpwhMLAy212zRPAOz2+nsG64GzOny8zRu1++xdz0/gYJXhIV9R0KHUwt+ihMJB5CUlZaXmJkkEQA7\"","export default \"data:image/gif;base64,R0lGODlhLwAnAMwAAAAAAGaaxcWvf8WaZrKAPz8AAJ+8xRM7bDlun5K2xQAAEwArXyxUjDM1M5KTkqW2xaWAP3KdxT99rL+vnyxkmVNUjD8rX7KKWcWpn8XFxQAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABkALAAAAAAvACcAAAX/YCaOZGmeaKqubOu+cCzPdK1ihvu0V9NErcEhtxJYEiwCABAIAobFwgKpUjKdTyJKUABMq8sma7DMprjLL8oqXpHL0BM6TTWxsXAtaU4/3cdleSZ8fSV/boGCe12JaiOHKm+JZiOEZY4ZkCmSk3EZlpd1miicnUSgoSKjJ6Wmn4yTfasmraaogVOzJbWJChK3gRQQYXixAAoIr8ZlDJnEgMvIIsAAzc5X0LHS07CT1tdtkcbb3Mbf4MVl5OXehs+IvckloOeq7+KB65Xd1X73m/nkDepW79E/UuoEDmSWQheJN/rmMSpIwuEIMhEl9gODzU1GiRTddYyk8EyFFhZtEqiY4MDBDpUwY8qcSbOmzZohAAA7\"","import React from 'react';\r\nimport './info.styles.css';\r\nimport Turns from '../turns/turns.component';\r\nimport Resume from '../resume/resume.component';\r\nimport MovesCommands from '../movesCommands/movesCommands.component';\r\n\r\nconst Info = (props) => {\r\n  let status = props.game.status;\r\n  let pgn = props.game.pgnHistory\r\n\r\n  if(status === props.statuses.off){\r\n      return(\r\n        <div className='info-zone'>\r\n          <h3 className='board-title'>{props.game.infosTitle}</h3>\r\n          <textarea id=\"game-input\" className=\"game-input\" name=\"pgn\" defaultValue={pgn}></textarea>\r\n          <button onClick={props.savePGN}>Go</button>\r\n        </div>\r\n      )\r\n  }\r\n  else if (status === props.statuses.loaded) {\r\n      return(\r\n        <div className='info-zone'>\r\n          <h3 className='board-title'>{props.game.infosTitle}</h3>\r\n          <p className='infosMessage'>{props.game.infosMessage}</p>\r\n\r\n        </div>\r\n      )\r\n    } else if (status === props.statuses.ready) {\r\n      return(\r\n        <div className='turns-zone'>\r\n          <Resume resume = {props.game.pgnResume}/>\r\n          <Turns turnsList = {props.game.pgnGame} currentMove={props.game.move} movePGN = {props.movePGN}/>\r\n          <MovesCommands movePGN = {props.movePGN}/>\r\n        </div>\r\n      )\r\n    } else{\r\n      return(\r\n        <div className='info-zone'>\r\n          <h3 className='board-title'>404</h3>\r\n          <p className='infosMessage'>Sorry Buddy, I'm afraid we are lost !</p>\r\n        </div>\r\n      ) \r\n    }\r\n  }\r\n\r\n  export default Info;","const charIsLowercase = (c) => {\r\n    return c !== c.toUpperCase();\r\n  }\r\n\r\n  export {charIsLowercase};","import {charIsLowercase} from './utils.js';\r\n\r\nconst getAskedMove = (elem,currentMove,movesList) => {\r\n    let turn = 0;\r\n    let side = \"w\";\r\n    let askedMove = null;\r\n    let lastMove = movesList[movesList.length-1];\r\n    if(\"move\" in elem){\r\n      let instruction = elem.move;\r\n      if(instruction === \"first\"){\r\n        askedMove={\"number\":0,\"side\":\"w\"};\r\n      }else if(instruction === \"last\"){\r\n        if(\"b\" in lastMove){\r\n          askedMove={\"number\":movesList.length,\"side\":\"b\"};\r\n        }else{\r\n          askedMove={\"number\":movesList.length,\"side\":\"w\"};\r\n        }\r\n        askedMove.pace = \"quick\";\r\n      }else if(instruction === \"pause\"){\r\n        askedMove=currentMove;\r\n        askedMove.pace = \"stop\";\r\n      }else if(instruction === \"prev\"){\r\n        if(currentMove.number <= 1 && currentMove.side === \"w\"){\r\n          askedMove={\"number\":0,\"side\":\"w\"};\r\n        }else{\r\n          if(currentMove.side === \"b\"){\r\n            askedMove={\"number\":currentMove.number,\"side\":\"w\"};\r\n          }else{\r\n            askedMove={\"number\":currentMove.number -1 ,\"side\":\"b\"};\r\n          }\r\n          if(askedMove.number < 1 ){\r\n            askedMove={\"number\":1,\"side\":\"w\"};\r\n          }\r\n        }\r\n        askedMove.pace = \"quick\";\r\n      }else if(instruction === \"next\"){\r\n        if(currentMove.number === movesList.length){\r\n          if(currentMove.side === \"b\"){\r\n            askedMove=currentMove;\r\n          }else{\r\n            if(\"b\" in lastMove){\r\n              askedMove={\"number\":movesList.length ,\"side\":\"b\"};\r\n            }else{\r\n              askedMove=currentMove;\r\n            }\r\n          }\r\n        }else{\r\n          if(currentMove.side === \"b\"){\r\n            askedMove={\"number\":currentMove.number +1,\"side\":\"w\"};\r\n          }else{\r\n            askedMove={\"number\":currentMove.number ,\"side\":\"b\"};\r\n          }\r\n        }\r\n\r\n        if(askedMove.number < 1 ){\r\n          askedMove={\"number\":1,\"side\":\"w\"};\r\n        }\r\n      }\r\n    }\r\n\r\n    else if(\"turn\" in elem && \"side\" in elem){\r\n      turn = parseInt(elem.turn);\r\n      if(isNaN(turn)){\r\n        turn = 0;\r\n      }\r\n      side = elem.side;\r\n    }\r\n    if(turn>0){\r\n      askedMove={\"number\":turn,\"side\":side};\r\n    }\r\n    return askedMove;\r\n  }\r\n\r\n  const getNextMove = (gamePositions,currentMove,askedMove,columnsOrdered) => {\r\n    let askedMoveOffset = getMoveOffset(askedMove);\r\n    let currentMoveOffset = getMoveOffset(currentMove);\r\n    let nextMoveData = {\r\n      moveSide:\"\",\r\n      moveColumn : \"\",\r\n      moveRow : 0,\r\n      movePieceType : null,\r\n      moveType : null, // move, castle-king, take\r\n      isCheck : false, // maybe not usefull\r\n      isMat : false,\r\n      isError : false,\r\n      isDone : true, // no change : we are at the asked move\r\n      possiblePositions : [],\r\n      additionalMove : null,\r\n      comingFromRow : 0, // ex R2c8 => 2 : the Rook is coming from row 2 (there are 2 Rooks able to make teh move)\r\n      comingFromColumn : \"\",// ex Rac8 => a : the Rook is coming from column/file \"a\"\r\n      uniqueFigure:false,\r\n      promoteTo:null,\r\n      number:0\r\n    };\r\n\r\n    if(askedMoveOffset > currentMoveOffset){\r\n      nextMoveData.isDone = false;\r\n      let nextMoveOffset = currentMoveOffset === 0 ? currentMoveOffset = 1 : currentMoveOffset+1;\r\n      let nextMovePosition = {}\r\n      if(nextMoveOffset % 2 === 1){\r\n        nextMovePosition.number = Math.trunc(currentMoveOffset/2)+1;\r\n        nextMovePosition.side = \"w\";\r\n      }else{\r\n        nextMovePosition.number = (currentMoveOffset+1)/2;\r\n        nextMovePosition.side = \"b\";\r\n      }\r\n      \r\n      let nextMove = gamePositions[nextMovePosition.number-1][nextMovePosition.side];\r\n      nextMoveData.moveSide = nextMovePosition.side;\r\n      nextMoveData.number = nextMovePosition.number;\r\n      nextMove = nextMove.replace(/\\?|!/,\"\") // no ?! !! etc...\r\n\r\n      nextMoveData.moveType = \"move\";\r\n      \r\n      let take = nextMove.indexOf(\"x\") !== -1;\r\n      if(take){\r\n        nextMove = nextMove.replace(\"x\",\"\");\r\n        nextMoveData.moveType = \"take\";\r\n      }\r\n      \r\n      if(nextMove.charAt(nextMove.length-1) === \"+\" && nextMove.charAt(nextMove.length-2) === \"+\"){\r\n        nextMoveData.isMat = true;\r\n        nextMove = nextMove.substring(0,nextMove.length-2);\r\n      }else if(nextMove.charAt(nextMove.length-1) === \"+\"){\r\n        nextMoveData.isCheck = true;\r\n        nextMove = nextMove.substring(0,nextMove.length-1);\r\n      }\r\n      if(nextMove.length === 2){// pawn move\r\n        nextMoveData.movePieceType = \"p\";\r\n        nextMoveData.moveColumn = nextMove.charAt(0);\r\n        nextMoveData.moveRow = parseInt(nextMove.charAt(1));\r\n        if(isNaN(nextMoveData.moveRow)){\r\n          nextMoveData.isError = true;\r\n        }\r\n      } else if(nextMove.length === 3){\r\n          if(nextMove === \"0-0\" || nextMove === \"O-O\"){\r\n            nextMoveData.movePieceType = \"K\";\r\n            nextMoveData.moveColumn = \"g\"\r\n            nextMoveData.moveRow = nextMoveData.moveSide === \"w\" ? 1 : 8;\r\n            nextMoveData.moveType = \"castle-king\";\r\n            nextMoveData.possiblePositions = [];\r\n            nextMoveData.additionalMove = {\r\n              moveSide:nextMoveData.moveSide,\r\n              moveColumn : \"f\",\r\n              moveRow :  nextMoveData.moveRow,\r\n              movePieceType : \"R\",\r\n              moveType : nextMoveData.moveType,\r\n              isCheck : false, // maybe not usefull\r\n              isError : false,\r\n              possiblePositions : []\r\n            }\r\n          }else{\r\n            let isLowerCase = charIsLowercase(nextMove.charAt(0))\r\n            if(isLowerCase){ // it's a pawn with an indication from which column/file it's coming\r\n              nextMoveData.movePieceType = \"p\";\r\n              nextMoveData.comingFromColumn = nextMove.charAt(0);\r\n              nextMoveData.moveColumn = nextMove.charAt(1);\r\n              nextMoveData.moveRow = parseInt(nextMove.charAt(2));\r\n            }else{ // it's a Figure\r\n              nextMoveData.movePieceType = nextMove.charAt(0);\r\n              nextMoveData.moveColumn = nextMove.charAt(1);\r\n              nextMoveData.moveRow = parseInt(nextMove.charAt(2));\r\n            }\r\n            if(isNaN(nextMoveData.moveRow)){\r\n              nextMoveData.isError = true;\r\n            }\r\n          }\r\n      }else if(nextMove.length === 4){\r\n        if(nextMove.charAt(2) === \"=\"){\r\n          nextMoveData.promoteTo = nextMove.charAt(3);\r\n          nextMoveData.movePieceType = \"p\";\r\n          nextMoveData.moveColumn = nextMove.charAt(0);\r\n          nextMoveData.moveRow = parseInt(nextMove.charAt(1));\r\n        }else{\r\n          nextMoveData.movePieceType = nextMove.charAt(0);\r\n          let comingFrom = nextMove.charAt(1);\r\n          if(!isNaN(parseInt(comingFrom))){\r\n            nextMoveData.comingFromRow = parseInt(comingFrom);\r\n          }else{\r\n            nextMoveData.comingFromColumn = comingFrom;\r\n          }\r\n          nextMoveData.moveColumn = nextMove.charAt(2);\r\n          nextMoveData.moveRow = parseInt(nextMove.charAt(3));\r\n          if(isNaN(nextMoveData.moveRow)){\r\n            nextMoveData.isError = true;\r\n          }\r\n        }\r\n      }else if(nextMove === \"0-0-0\" || nextMove === \"O-O-O\"){\r\n        nextMoveData.movePieceType = \"K\";\r\n        nextMoveData.moveColumn = \"c\";\r\n        nextMoveData.moveRow = nextMoveData.moveSide === \"w\" ? 1 : 8;\r\n        nextMoveData.moveType = \"castle-queen\";\r\n        nextMoveData.possiblePositions = [];\r\n        nextMoveData.additionalMove = {\r\n          moveSide:nextMoveData.moveSide,\r\n          moveColumn : \"d\",\r\n          moveRow : nextMoveData.moveRow,\r\n          movePieceType : \"R\",\r\n          moveType : nextMoveData.moveType,\r\n          isCheck : false, \r\n          isError : false,\r\n          possiblePositions : []\r\n        }\r\n      }else{\r\n        // to be continued (queen side castling)\r\n        nextMoveData.isError = true;\r\n      }\r\n      // Computing possible previous positions of the moving piece \r\n      if(!nextMoveData.isError){\r\n        nextMoveData.possiblePositions = [];\r\n        if(nextMoveData.movePieceType === \"p\"){\r\n          setPawnPossiblePreviousPositions(nextMoveData,columnsOrdered);\r\n        }else if(nextMoveData.movePieceType === \"N\"){\r\n          setKnightPossiblePreviousPositions(nextMoveData,columnsOrdered);\r\n        }else if(nextMoveData.movePieceType === \"B\"){\r\n          setBishopPossiblePreviousPositions(nextMoveData,columnsOrdered);\r\n        }else if(nextMoveData.movePieceType === \"R\"){\r\n          setRookPossiblePreviousPositions(nextMoveData,columnsOrdered);\r\n        }else if(nextMoveData.movePieceType === \"K\"){\r\n          setKingPossiblePreviousPositions(nextMoveData,columnsOrdered);\r\n         } else if (nextMoveData.movePieceType === \"Q\") {\r\n           nextMoveData.uniqueFigure = true;\r\n         }\r\n      }\r\n    }\r\n\r\n    return nextMoveData;\r\n  }\r\n\r\n\r\nconst setRookPossiblePreviousPositions = (nextMoveData, columnsOrdered) => {\r\n  // Same column \r\n  // changing row\r\n  for (let r = 1; r < 9; r++) {\r\n    if (r === nextMoveData.moveRow) continue;\r\n    let possibleMove = {\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": r\r\n    };\r\n    if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n      (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n      nextMoveData.possiblePositions.push(possibleMove);\r\n    }\r\n  }\r\n\r\n  // Same row \r\n  // changing column/file\r\n  for (let c = 0; c < 8; c++) {\r\n    if (columnsOrdered[c] === nextMoveData.moveColumn) continue;\r\n    let possibleMove = {\r\n      \"column\": columnsOrdered[c],\r\n      \"row\": nextMoveData.moveRow\r\n    };\r\n    if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n      (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n      nextMoveData.possiblePositions.push(possibleMove);\r\n    }\r\n  }\r\n}\r\n\r\nconst setKingPossiblePreviousPositions = (nextMoveData,columnsOrdered) => {\r\n\r\n  if (nextMoveData.moveType === \"castle-king\") {\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": \"e\",\r\n      \"row\": nextMoveData.moveSide === \"w\" ? 1 : 8\r\n    });\r\n    nextMoveData.additionalMove.possiblePositions.push({\r\n      \"column\": \"h\",\r\n      \"row\": nextMoveData.moveSide === \"w\" ? 1 : 8\r\n    });\r\n    nextMoveData.moveType = \"move\";\r\n    nextMoveData.additionalMove.moveType = \"move\";\r\n  } else if (nextMoveData.moveType === \"castle-queen\") {\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": \"e\",\r\n      \"row\": nextMoveData.moveSide === \"w\" ? 1 : 8\r\n    });\r\n    nextMoveData.additionalMove.possiblePositions.push({\r\n      \"column\": \"a\",\r\n      \"row\": nextMoveData.moveSide === \"w\" ? 1 : 8\r\n    });\r\n    nextMoveData.moveType = \"move\";\r\n    nextMoveData.additionalMove.moveType = \"move\";\r\n\r\n  } else {\r\n    nextMoveData.uniqueFigure = true;\r\n  }\r\n}\r\n\r\nconst setPawnPossiblePreviousPositions = (nextMoveData,columnsOrdered) => {\r\n  if (nextMoveData.moveRow === 4 && nextMoveData.moveSide === \"w\" && nextMoveData.moveType === \"move\") {\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": 3\r\n    });\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": 2\r\n    });\r\n  } else if (nextMoveData.moveRow === 5 && nextMoveData.moveSide === \"b\" && nextMoveData.moveType === \"move\") {\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": 7\r\n    });\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": 6\r\n    });\r\n  } else if (nextMoveData.moveType === \"move\") {\r\n    nextMoveData.possiblePositions.push({\r\n      \"column\": nextMoveData.moveColumn,\r\n      \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n    });\r\n  } else if (nextMoveData.moveType === \"take\") {\r\n    // mundane take :\r\n    if (nextMoveData.comingFromColumn !== \"\") {\r\n      nextMoveData.possiblePositions.push({\r\n        \"column\": nextMoveData.comingFromColumn,\r\n        \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n      });\r\n    } else {\r\n      let posMoveColumn = columnsOrdered.indexOf(nextMoveData.moveColumn);\r\n      if (posMoveColumn === 0) { // pawn takes on \"a\" file : only one possibility, it's on \"b\" file\r\n        nextMoveData.possiblePositions.push({\r\n          \"column\": columnsOrdered[1],\r\n          \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n        });\r\n        //setEnPassantLeftSide(nextMoveData,columnsOrdered,posMoveColumn);\r\n      } else if (posMoveColumn === 7) { // pawn takes on \"h\" file : only one possibility, it's on \"g\" file\r\n        nextMoveData.possiblePositions.push({\r\n          \"column\": columnsOrdered[6],\r\n          \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n        });\r\n        //setEnPassantRightSide(nextMoveData,columnsOrdered,posMoveColumn);\r\n      } else { // 2 possibilities the pawn is either coming from the left side or the right side of the taken piece column\r\n        nextMoveData.possiblePositions.push({\r\n          \"column\": columnsOrdered[posMoveColumn - 1],\r\n          \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n        });\r\n        //setEnPassantLeftSide(nextMoveData,columnsOrdered,posMoveColumn);\r\n        nextMoveData.possiblePositions.push({\r\n          \"column\": columnsOrdered[posMoveColumn + 1],\r\n          \"row\": nextMoveData.moveSide === \"w\" ? nextMoveData.moveRow - 1 : nextMoveData.moveRow + 1\r\n        });\r\n        //setEnPassantRightSide(nextMoveData,columnsOrdered,posMoveColumn);\r\n      }\r\n    }\r\n  } else {\r\n    nextMoveData.isError = true;\r\n  }\r\n}\r\n\r\nconst setBishopPossiblePreviousPositions = (nextMoveData,columnsOrdered) => {\r\n // diagonally\r\n let rowPos = nextMoveData.moveRow;// starts at 1\r\n let convenientShift = 1;\r\n let colPos = columnsOrdered.indexOf(nextMoveData.moveColumn) + convenientShift; // starts at 0\r\n\r\n  // each +1 row +1 col\r\nlet c = colPos + 1;\r\nlet r = rowPos + 1;\r\nfor (let i = 0; i < 9; i++) {\r\n  if (c < 9 && r < 9) {\r\n    let possibleMove = {\r\n      \"column\": columnsOrdered[c - convenientShift],\r\n      \"row\": r\r\n    };\r\n    if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n      (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n      nextMoveData.possiblePositions.push(possibleMove);\r\n    }\r\n  }\r\n  c++;\r\n  r++;\r\n}\r\n\r\n // each +1 row -1 col\r\n c = colPos - 1;\r\n r = rowPos + 1;\r\n for (let i = 0; i < 9; i++) {\r\n   if (c > 0 && r < 9) {\r\n     let possibleMove = {\r\n       \"column\": columnsOrdered[c - convenientShift],\r\n       \"row\": r\r\n     };\r\n     if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n       (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n       nextMoveData.possiblePositions.push(possibleMove);\r\n     }\r\n   }\r\n   c--;\r\n   r++;\r\n }\r\n // each -1 row +1 col\r\n c = colPos + 1;\r\n r = rowPos - 1;\r\n for (let i = 0; i < 9; i++) {\r\n  if (c <  9 && r > 0) {\r\n    let possibleMove = {\r\n      \"column\": columnsOrdered[c - convenientShift],\r\n      \"row\": r\r\n    };\r\n    if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n      (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n      nextMoveData.possiblePositions.push(possibleMove);\r\n    }\r\n  }\r\n  c++;\r\n  r--;\r\n}\r\n // each -1 row -1 col\r\n c = colPos-1;\r\n r = rowPos-1;\r\n  for(let i = 8 ;i > 0; i--){\r\n     if (c > 0 && c > 0) {\r\n       let possibleMove = {\r\n         \"column\": columnsOrdered[c - convenientShift],\r\n         \"row\": r\r\n       };\r\n       if ((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow) &&\r\n         (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn)) {\r\n         nextMoveData.possiblePositions.push(possibleMove);\r\n       }\r\n     }\r\n     c--;\r\n     r--;\r\n  }\r\n}\r\n\r\nconst setKnightPossiblePreviousPositions = (nextMoveData,columnsOrdered) => {\r\n        // either 2 rows and 1 column aside or 1 row and 2 col aside\r\n        let rowPos = nextMoveData.moveRow;// starts at 1\r\n        let convenientShift = 1;\r\n        let colPos = columnsOrdered.indexOf(nextMoveData.moveColumn) + convenientShift; // starts at 1\r\n        // - 2 row - 1 col\r\n        if(rowPos - 2 > 0 && colPos - 1 > 0){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos - 1 - convenientShift],\"row\":rowPos - 2};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // - 2 row + 1 col\r\n        if(rowPos - 2 > 0 && colPos + 1 < 9){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos + 1 - convenientShift],\"row\":rowPos - 2};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // + 2 row - 1 col\r\n        if(rowPos + 2 < 9 && colPos - 1 > 0){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos - 1 - convenientShift],\"row\":rowPos + 2};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // + 2 row + 1 col\r\n        if(rowPos + 2 < 9 && colPos + 1 < 9){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos + 1 - convenientShift],\"row\":rowPos + 2};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // - 1 row - 2 col\r\n        if(rowPos - 1 > 0 && colPos - 2 > 0){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos - 2 - convenientShift],\"row\":rowPos - 1};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // - 1 row + 2 col\r\n        if(rowPos - 1 > 0 && colPos + 2 < 9){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos + 2 - convenientShift],\"row\":rowPos - 1};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // + 1 row - 2 col\r\n        if(rowPos + 1 < 9 && colPos - 2 > 0){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos - 2 - convenientShift],\"row\":rowPos + 1};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n        // + 1 row + 2 col\r\n        if(rowPos + 1 < 9 && colPos + 2 < 9){\r\n          let possibleMove = {\"column\":columnsOrdered[colPos + 2 - convenientShift],\"row\":rowPos + 1};\r\n          if((nextMoveData.comingFromRow === 0 || possibleMove.row === nextMoveData.comingFromRow ) \r\n          && (nextMoveData.comingFromColumn === \"\" || possibleMove.column === nextMoveData.comingFromColumn )){\r\n            nextMoveData.possiblePositions.push(possibleMove);\r\n          }\r\n        }\r\n\r\n}\r\n\r\nconst getMoveOffset = (move) => {\r\n  return move.number === 0 ? 0 : ((move.number-1)*2) + (move.side === \"w\" ? 1 : 2);\r\n}\r\n\r\nexport {getMoveOffset,getAskedMove,getNextMove};","import React from 'react';\r\nimport './game.styles.css';\r\nimport Board from '../board/board.component';\r\nimport Info from '../info/info.component';\r\nimport {getMoveOffset,getAskedMove,getNextMove} from '../../movesLogic.js';\r\nimport {boardToFen,fenToBoard} from '../../fen.js';\r\n\r\nclass Game extends React.Component {\r\n    constructor(){\r\n        super();        \r\n         // off, loaded, inerror, ready\r\n        this.gameStatus = {\r\n            \"off\":0,\r\n            \"loaded\":1,\r\n            \"inerror\":2,\r\n            \"ready\":3\r\n        };\r\n\r\n        this.state = {\r\n              \"readerStop\":false,\r\n              \"initialData\": null,\r\n              \"gameIsReady\" :false,\r\n              \"status\":this.gameStatus.off,\r\n              \"infosTitle\":\"\",\r\n              \"infosMessage\":\"\",\r\n              \"msg\":\"White to play\",\r\n              \"data\":[],\r\n              \"pgnHistory\":\"\",\r\n              \"move\":{\"number\":0,\"side\":\"b\"},\r\n              \"pgnResume\":[],\r\n              \"pgnGame\":[],\r\n              \"fenGame\":[{\"number\":0,\"side\":\"w\",\"fen\":\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\"}],\r\n              \"positions\":[],\r\n              \"columns\" : \"a,b,c,d,e,f,g,h\".split(\",\"), // \"columns\" or \"files\"\r\n              \"rows\" : [1,2,3,4,5,6,7,8],\r\n              \"figures\" : \"R,N,B,Q,K,B,N,R\".split(\",\"),\r\n              \"pawn\" : \"p\",\r\n              \"black\": \"B\",\r\n              \"white\": \"W\",\r\n              \"blackColor\" : \"dark-square\",\r\n              \"whiteColor\" : \"light-square\",\r\n              \"nrSquaresPerside\" : 8, // in case we want to change the rules !!!\r\n              \"figCodes\":{\r\n                \"KB\":\"&#9818;\",\r\n                \"QB\":\"&#9819;\",\r\n                \"RB\":\"&#9820;\",\r\n                \"BB\":\"&#9821;\",\r\n                \"NB\":\"&#9822;\",\r\n                \"pB\":\"&#9823;\",\r\n                \"KW\":\"&#9812;\",\r\n                \"QW\":\"&#9813;\",\r\n                \"RW\":\"&#9814;\",\r\n                \"BW\":\"&#9815;\",\r\n                \"NW\":\"&#9816;\",\r\n                \"pW\":\"&#9817;\",\r\n              }\r\n        };\r\n      }\r\n\r\n     moveGameTo = (askedMove) => {\r\n\r\n       let timing = 10;\r\n       if(\"pace\" in askedMove){\r\n         if(askedMove.pace === \"quick\"){\r\n          timing = 1;\r\n         }else if(askedMove.pace === \"stop\"){\r\n          this.setState((prevState,prevProps) => {\r\n            return {\r\n              \"readerStop\": true\r\n             }\r\n            });\r\n          }\r\n       }\r\n        let currentMove = this.state.move;\r\n        let gamePgn = this.state.pgnGame;\r\n        let gamePositions = this.state.data;\r\n        let columnsOrdered = this.state.columns.slice(0)\r\n        let nextMoveData = getNextMove (gamePgn,currentMove,askedMove,columnsOrdered);\r\n\r\n        if(!nextMoveData.isError && !nextMoveData.isDone){\r\n            let hasMoved = false;\r\n            if(nextMoveData.possiblePositions && nextMoveData.possiblePositions.length > 0){\r\n                for(let i = 0;i< nextMoveData.possiblePositions.length; i++){\r\n                  if(hasMoved) break;\r\n                  for(let j = 0;j< gamePositions.length; j++){\r\n                     if(gamePositions[j].column === nextMoveData.possiblePositions[i].column && gamePositions[j].row === nextMoveData.possiblePositions[i].row){\r\n                      if(gamePositions[j].fig === (nextMoveData.movePieceType + nextMoveData.moveSide.toUpperCase())){\r\n                        hasMoved = true;\r\n                        gamePositions[j].fig = null;\r\n                        break;\r\n                      }\r\n                     }\r\n                  }\r\n                }\r\n         \r\n            if (nextMoveData.additionalMove !== null) {\r\n              let hasMovedKing = hasMoved;\r\n              let hasMovedRook = false;\r\n              for (let i = 0; i < gamePositions.length; i++) {\r\n                // Rook\r\n                if (gamePositions[i].column === nextMoveData.additionalMove.possiblePositions[0].column && gamePositions[i].row === nextMoveData.additionalMove.possiblePositions[0].row) {\r\n                  if (gamePositions[i].fig === nextMoveData.additionalMove.movePieceType + nextMoveData.additionalMove.moveSide.toUpperCase()) {\r\n                    hasMovedRook = true;\r\n                    gamePositions[i].fig = null;\r\n                  }\r\n                }\r\n              }\r\n              hasMoved = hasMovedKing && hasMovedRook;\r\n            }\r\n            }\r\n            if(nextMoveData.uniqueFigure === true){\r\n              for(let i = 0;i< gamePositions.length; i++){\r\n                if(gamePositions[i].fig ===  nextMoveData.movePieceType + nextMoveData.moveSide.toUpperCase()){\r\n                  hasMoved = true;\r\n                  gamePositions[i].fig = null;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            if(hasMoved){\r\n              for(let i = 0;i< gamePositions.length; i++){\r\n                if(gamePositions[i].column === nextMoveData.moveColumn && gamePositions[i].row === nextMoveData.moveRow){\r\n                  if(nextMoveData.moveType === \"take\"){\r\n                    if(gamePositions[i].fig === null && nextMoveData.movePieceType === \"p\") { // En passant\r\n                      let delta = nextMoveData.moveSide === \"w\" ? 8 : -8;\r\n                      gamePositions[i + delta].fig = null;\r\n                    }\r\n                    gamePositions[i].fig = nextMoveData.movePieceType + nextMoveData.moveSide.toUpperCase();\r\n                    \r\n                  }else{\r\n                    gamePositions[i].fig = nextMoveData.promoteTo ? nextMoveData.promoteTo + nextMoveData.moveSide.toUpperCase() : nextMoveData.movePieceType + nextMoveData.moveSide.toUpperCase();\r\n                  }\r\n                  break;\r\n                }\r\n              }\r\n              if(nextMoveData.additionalMove !=null){\r\n                for(let i = 0;i< gamePositions.length; i++){\r\n                  if(gamePositions[i].column === nextMoveData.additionalMove.moveColumn && gamePositions[i].row === nextMoveData.additionalMove.moveRow){\r\n                    gamePositions[i].fig = nextMoveData.additionalMove.movePieceType + nextMoveData.additionalMove.moveSide.toUpperCase();\r\n                    break;\r\n                  }\r\n                }   \r\n              }\r\n              let doContinue = !this.state.readerStop; // does not work !\r\n\r\n              let fenGame = this.state.fenGame;\r\n              let fenData = fenGame.filter((x)=>{\r\n                return x.number === nextMoveData.number && x.side === nextMoveData.moveSide;    \r\n              });\r\n              if(fenData.length === 0){\r\n                let gamePositions = this.state.data;\r\n                let columnsOrdered = this.state.columns.slice(0)\r\n                let fen = boardToFen(gamePositions,nextMoveData,columnsOrdered);\r\n                if(fen){\r\n                  fenGame.push({\"number\":nextMoveData.number,\"side\":nextMoveData.moveSide,\"fen\":fen});\r\n                }\r\n              }\r\n              this.setState((prevState,prevProps) => {\r\n                return {\r\n                  \"data\": gamePositions,\r\n                  \"move\": {number: nextMoveData.number, side: nextMoveData.moveSide},\r\n                  \"fenGame\":fenGame\r\n                 }\r\n              },() => {\r\n                let that = this;\r\n                if(doContinue){\r\n                  setTimeout(function(){\r\n                    that.moveGameTo(askedMove);\r\n                  },timing);\r\n                }\r\n              });\r\n            }\r\n        }\r\n      }\r\n\r\n    componentDidMount() {\r\n      this.setNewGame();\r\n    }\r\n\r\n      cleanRawInfo = (raw) => {\r\n        //[Event \\\"Live Chess\\\"]\r\n        let clean = raw.replace(/\\\\|[|]|\"/g, \"\");\r\n        let pos = clean.indexOf(\" \");\r\n        if(pos !== -1){\r\n          let key = clean.substring(0,pos-1);\r\n          let value = clean.substring(pos+1,clean.length);\r\n          let result = {};\r\n          result[key] = value;\r\n          return result;\r\n        }else return null;\r\n      }\r\n\r\n      movePGN = (e) => {\r\n        let elem = (e.currentTarget).dataset;\r\n        let currentMove = this.state.move;\r\n        let currentMoveOffset = getMoveOffset(currentMove);\r\n        let askedMove = getAskedMove(elem, currentMove, this.state.pgnGame);\r\n        let askedMoveOffset = getMoveOffset(askedMove);\r\n        let fenMove = this.state.fenGame.filter((x) => {\r\n          return x.number === askedMove.number && x.side === askedMove.side;\r\n        });\r\n        if (fenMove.length !== 0) {\r\n          let columnsOrdered = this.state.columns.slice(0)\r\n          let reinitData = JSON.parse(this.state.initialData);\r\n          reinitData = fenToBoard(fenMove[0].fen, reinitData, columnsOrdered);\r\n          this.setState((prevState, prevProps) => {\r\n            return {\r\n              \"data\":reinitData,\r\n              \"move\": {\r\n                number: askedMove.number,\r\n                side: askedMove.side\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          if (askedMoveOffset !== currentMoveOffset) {\r\n            if (askedMoveOffset > currentMoveOffset) {\r\n              // move from currentMove to askedMove\r\n              this.moveGameTo(askedMove);\r\n            } else {\r\n              // reset currentMove to 0 and move to askedMove\r\n              let reinitData = JSON.parse(this.state.initialData);\r\n\r\n              this.setState((prevState, prevProps) => {\r\n                return {\r\n                  \"data\": reinitData,\r\n                  \"move\": {\r\n                    \"number\": 0,\r\n                    \"side\": \"w\"\r\n                  },\r\n                  \"status\": this.gameStatus.ready\r\n                }\r\n              }, () => {\r\n                this.moveGameTo(askedMove);\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      savePGN = () => {\r\n        let textArea = document.getElementById(\"game-input\");\r\n        if(textArea!=null){\r\n          let pgn = textArea.value;\r\n          if(pgn !== \"\"){ // todo check validity !\r\n            localStorage.setItem(\"pgnHistory\",pgn);\r\n            this.setState((prevState,prevProps) => {\r\n              return {\r\n                \"status\": this.gameStatus.loaded,\r\n               }\r\n            },() => {\r\n              this.setGameInfos();\r\n              let turns = [];\r\n              let turn = 1;\r\n              let limitBetweenGameParts =/\\n\\n/.exec(pgn).index;\r\n              let pgnGame = pgn.substring(limitBetweenGameParts, pgn.length).replace(/\\r\\n?|\\n/g, \" \").trim();\r\n              let infos = pgn.substring(0, limitBetweenGameParts).replace(/\\r\\n?|\\n/g, \",\").trim().split(\",\");\r\n              let turnPrevPosition =  pgnGame.indexOf(turn+\".\");\r\n              let turnNextPosition = 0;\r\n              let currentTurnData;\r\n              let end;\r\n              while (turnPrevPosition !== -1 && turnNextPosition !== -1){\r\n                turnNextPosition =  pgnGame.indexOf((turn+1)+\".\");\r\n                if(turnNextPosition !==-1){\r\n                  end = turnNextPosition;\r\n                }else{\r\n                  end = turnPrevPosition + 100;\r\n                }\r\n                  currentTurnData = pgnGame.substring(turnPrevPosition, end).replace(turn+\".\",\"\").trim();\r\n                  let moves = currentTurnData.split(\" \");\r\n                  let turnInfo = {\"w\":moves[0]};\r\n                  if(moves.length === 2){\r\n                    turnInfo.b = moves[1];\r\n                  }\r\n                  turns.push(turnInfo);\r\n                  turnPrevPosition = turnNextPosition;\r\n                turn++;\r\n              } \r\n              let infosClean = {};\r\n              infos.forEach(function(raw){\r\n                let clean = raw.replace(/\\\\|\\[|\\]|\"/g, \"\");\r\n                let pos = clean.indexOf(\" \");\r\n                if(pos !== -1){\r\n                  let key = clean.substring(0,pos);\r\n                  let value = clean.substring(pos+1,clean.length);\r\n                  infosClean[key] = value;\r\n                }\r\n              });\r\n              this.setState((prevState,prevProps) => {\r\n                return {\r\n                  \"pgnResume\": infosClean,\r\n                  \"pgnGame\":turns,\r\n                  \"status\": this.gameStatus.ready\r\n                 }\r\n              },() => {\r\n                this.setGameInfos();\r\n              });\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      setGameInfos = () => {\r\n        let infos = \"\"\r\n        switch (this.state.status) {\r\n          case this.gameStatus.off:\r\n            infos = {\"title\":\"Please enter a game in PGN format\",\"message\":\"\"};\r\n            break;\r\n          case this.gameStatus.loaded:\r\n            infos = {\"title\":\"Game loaded\",\"message\":\"analysing game...(WIP)\"};\r\n           break;\r\n           case this.gameStatus.inerror:\r\n            infos = {\"title\":\"Error !\",\"message\":\"the game can't be analysed...\"};\r\n           break;\r\n           case this.gameStatus.ready:\r\n            infos = {\"title\":\"Game ready\",\"message\":\"Let's read it !\"};\r\n           break;\r\n          default:\r\n            infos = {\"title\":\"Error !\",\"message\":\"the program is in error...\"};\r\n        }\r\n\r\n        this.setState((prevState,prevProps) => {\r\n          return {\r\n            \"infosTitle\":infos.title,\r\n            \"infosMessage\":infos.message\r\n           }\r\n        });\r\n      }\r\n\r\n      setNewGame = () => {\r\n        let pgn = \"\";\r\n        if(localStorage.getItem(\"pgnHistory\")!== null){\r\n          pgn = localStorage.getItem(\"pgnHistory\");\r\n        }\r\n\r\n        let data = [];\r\n        let positions =  [];\r\n        let blackColor = this.state.blackColor;\r\n        let whiteColor = this.state.whiteColor;\r\n        let black =  this.state.black;\r\n        let white =  this.state.white;\r\n\r\n        var currentColor;\r\n        var previousColor = whiteColor;\r\n        var row = 0;\r\n        let col = 0;\r\n        var i = 0;\r\n        for(var r = 7;r>=0;r--){\r\n          row = this.state.rows[r];\r\n          for(var c = 0;c<8;c++){\r\n            col = this.state.columns[c];\r\n            i++;\r\n            if(i % 8 === 1){\r\n              currentColor = previousColor;\r\n            }else{\r\n              currentColor = previousColor === blackColor? whiteColor : blackColor;\r\n              previousColor = currentColor;\r\n            }\r\n            data.push({\"row\":row,\"column\":col,\"squareColor\":currentColor,\"fig\":null});\r\n           }\r\n        }\r\n      \r\n        this.state.figures.forEach((fig,i) =>{\r\n          positions.push({\"row\":this.state.rows[0],\"column\":this.state.columns[i],\"fig\":fig+white});\r\n          positions.push({\"row\":this.state.rows[1],\"column\":this.state.columns[i],\"fig\":this.state.pawn+white});\r\n          positions.push({\"row\":this.state.rows[6],\"column\":this.state.columns[i],\"fig\":this.state.pawn+black});\r\n          positions.push({\"row\":this.state.rows[7],\"column\":this.state.columns[i],\"fig\":fig+black});\r\n        });\r\n\r\n        data.forEach((sqr)=>{\r\n            let check = positions.filter((pos)=>{\r\n              return pos.row === sqr.row && pos.column === sqr.column;\r\n            });\r\n            if(check.length===1){\r\n              sqr.fig = check[0].fig;\r\n            }\r\n        });\r\n        this.setState((prevState,prevProps) => {\r\n          return {\r\n            \"data\": data,\r\n            \"initialData\":JSON.stringify(data),\r\n            \"positions\":positions,\r\n            \"move\":{\"number\":0,\"side\":\"w\"},\r\n            \"pgnHistory\": pgn,\r\n            \"gameIsReady\":true\r\n           }\r\n        });\r\n        \r\n      }\r\n\r\n        render() {\r\n          if( this.state.gameIsReady){\r\n          return (\r\n            <div className=\"game\">\r\n              <div className=\"game-board\">\r\n                <Board key={1} game={this.state} />\r\n              </div>\r\n              <div className=\"game-info\">\r\n                <Info key={1} game={this.state} moveFromCommand={this.moveFromCommand} movePGN={this.movePGN} savePGN={this.savePGN} statuses={this.gameStatus}></Info>\r\n              </div>\r\n            </div>\r\n          );\r\n          }else{\r\n            return(\r\n              <div className=\"game\">\r\n                <h1> Loading </h1>\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n  }\r\n\r\n  export default Game;\r\n\r\n","//4r3/N1kbQ3/2r2p2/4p1p1/8/7P/PP4P1/2q2NK1 w - - 5 32\r\nimport {charIsLowercase} from './utils.js';\r\n\r\nconst boardToFen = (gamePositions,nextMoveData,columnsOrdered) => {\r\nlet fen = \"\";\r\nlet separator = \"\";\r\nlet index = 0;\r\nlet nullCounter = 0;\r\nlet currentFigure = \"\";\r\n[1,2,3,4,5,6,7,8].forEach((row) => {\r\n    fen+=separator;\r\n    separator = \"/\";\r\n    nullCounter = 0;\r\n    columnsOrdered.forEach((x,col) => {\r\n        index = (row-1) * 8 + col;\r\n        currentFigure = gamePositions[index].fig;\r\n        if(currentFigure === null){\r\n            nullCounter++;\r\n        }else{\r\n            if(nullCounter > 0){\r\n                fen+=nullCounter+\"\";\r\n                nullCounter = 0;\r\n            }\r\n            if(currentFigure.charAt(1) === \"B\"){\r\n                fen+=currentFigure.charAt(0).toLowerCase();\r\n            }else{\r\n                fen+=currentFigure.charAt(0).toUpperCase();\r\n            }\r\n        }\r\n    })\r\n    if(nullCounter > 0){\r\n        fen+=nullCounter+\"\";\r\n        nullCounter = 0;\r\n    }\r\n})\r\nconsole.log(nextMoveData)\r\n// posible castles are missing and number of moves since the last pawn move or check (?)\r\nfen += \" \" + nextMoveData.moveSide + \" - - 0 \" + nextMoveData.number ;\r\n    return fen;\r\n}\r\n\r\nconst fenToBoard = (fen,board,columnsOrdered) => {\r\n    if(!fen) return null;\r\n    let parts = fen.split(\" \");\r\n    let colDatas = parts[0].split(\"/\");\r\n    if(colDatas.length !== 8) return null;\r\n    let cursorPos = -1\r\n    colDatas.forEach((colData,i) => {\r\n        cursorPos = i*8;\r\n        let colDataLen = colData.length;\r\n        for(let c = 0;c < colDataLen;c++ ){\r\n            let char = colData.charAt(c);\r\n            let intTry = parseInt(char);\r\n            if (!isNaN(intTry)) {\r\n                for (let d = 0; d < intTry; d++) {\r\n                    board[cursorPos + d].fig = null;\r\n                }\r\n                cursorPos+=intTry;\r\n            }else{\r\n                let side = \"W\";\r\n                let fig = char;\r\n                if(charIsLowercase(char)){ // Black\r\n                    side = \"B\";\r\n                    if (char === \"p\") {\r\n                        fig = \"p\";\r\n                    } else {\r\n                        fig = char.toUpperCase();\r\n                    }\r\n                }else{ // White\r\n                    if (char === \"P\") {\r\n                        fig = \"p\";\r\n                    } else {\r\n                        fig = char;\r\n                    }\r\n                } \r\n                board[cursorPos].fig = fig + side;\r\n                cursorPos++;\r\n            }\r\n        }\r\n    });\r\n\r\n    return board;\r\n}\r\n\r\nexport {boardToFen,fenToBoard};","import React from 'react';\r\n\r\nimport './App.css';\r\nimport Header from './components/header/header.component';\r\nimport Game from './components/game/game.component';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header/>\r\n      <Game/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}